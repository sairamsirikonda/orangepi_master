import serial
import time

serial_port = "/dev/ttyS0"  # Adjust this based on your Orange Pi's serial port
baud_rate = 9600

ser = serial.Serial()

try:
    ser.port = serial_port
    ser.baudrate = baud_rate
    ser.timeout = 1

    ser.open()
    if ser.is_open:
        print(f"Serial port {serial_port} opened successfully.")
    else:
        print(f"Failed to open serial port {serial_port}.")

    while True:
        message = "Hello from Orange Pi!"
        ser.write(message.encode())
        print(f"Orange Pi Sent: {message}")

        time.sleep(1)

except KeyboardInterrupt:
    if ser.is_open:
        ser.close()
        print("Serial connection closed.")
    else:
        print("Serial port was not open.")

except serial.SerialException as e:
    print(f"Serial error: {e}")
    if ser.is_open:
        ser.close()
        print("Serial connection closed due to error.")

